## Imports
import numpy as np
import math
from scipy.io import loadmat
import argparse
from os import path
import os
import matplotlib.pyplot as plt
plt.rcParams['text.latex.preamble'] = [r'\usepackage{sfmath} \boldmath']
plt.rcParams['text.usetex'] = True
plt.rcParams['font.weight'] = 'black'
plt.rcParams['font.size'] = '16'


def draw_results(carla_data, naval_data):
    carla_time = carla_data['t'][0]
    carla_inc = np.array([50. , 50. , 50. , 50. , 50. , 50. , 50. , 50. , 50. , 50. , 50. ,
       50. , 50. , 50. , 50. , 50. , 50. , 50. , 50. , 50. , 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 47.5,
       47.5, 47.5, 47.5, 47.5, 47.5, 45. , 45. , 45. , 45. , 45. , 45. ,
       45. , 45. , 45. , 48. , 45. , 48. , 48. , 48. , 48. , 48. , 48. ,
       45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. ,
       45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. ,
       45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. ,
       45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. ,
       45. , 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5,
       44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5,
       44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5,
       44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5,
       44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5,
       44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5,
       44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5,
       44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5, 44.5,
       44.5, 44.5, 39. , 39. , 39. , 39. , 39. , 39. , 39. , 39. , 39. ,
       39. , 39. , 39. , 39. , 39. , 39. , 39. , 39. , 39. , 39. , 39. ,
       39. , 39. , 39. , 39. , 39. , 39. , 39. , 39. , 39. , 39. , 39. ,
       39. , 39. , 39. , 39. , 39. , 39. , 39. , 39. , 39. , 39. , 39. ,
       39. , 39. , 39. , 39. , 39. , 39. , 39. , 39. , 39. , 39. , 39. ,
       39. , 39. , 39. , 39. , 39. , 39. , 39. , 45. , 45. , 45. , 45. ,
       45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. ,
       46. , 46. , 46. , 43.5, 43.5, 43.5, 43.5, 43.5, 43.5, 43.5, 43.5,
       43.5, 43.5, 43.5, 43.5, 43.5, 43.5, 43.5, 43.5, 43.5, 45. , 45. ,
       45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. ,
       45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. ,
       45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. , 45. ,
       45. , 40. , 40. , 40. , 40. , 40. , 40. , 40. , 40. , 40. , 40. ,
       40. , 40. , 40. , 40. , 40. , 40. , 40. , 40. , 40. , 40. , 40. ,
       40. , 40. , 40. , 40. , 40. , 40. , 40. , 40. , 40. , 40. , 40. ,
       40. , 40. , 40. , 40. , 40. , 40. , 40. , 40. , 40. , 40. , 40. ,
       40. , 40. , 40. , 40. , 40. , 40. , 40. , 40. , 38. , 38. , 38. ,
       40. , 40. , 40. , 41. , 41. , 41. , 41. , 41. , 41. , 41. , 41. ,
       41. , 41. , 41. , 41. , 41. , 41. , 41. , 41. , 42. , 42. , 42. ,
       42. , 42. , 42. , 39.5, 39.5, 39.5, 39.5, 39.5, 35. , 25. , 25. ,
       25. , 22.5, 22.5, 22.5, 22.5, 22.5, 22.5, 22. , 22. , 22. , 22. ,
       22. , 22. , 22. , 22. , 22. , 22. , 22. , 22. , 22. , 22. , 22. ,
       22. , 22. , 16. , 16. , 16. , 16. , 16. , 16. , 16. , 16. , 16. ,
       16. , 16. ,  9.5,  9.5,  9.5, 12.5, 12.5, 12.5, 12.5, 12.5, 12.5,
       12.5, 12.5,  9. ,  9. ,  9. ,  8.5,  4.5,  4.5,  4.5,  4.5,  4.5,
        4.5,  4.5,  4.5,  4.5,  4.5,  4.5,  4.5,  4.5,  4.5,  4.5,  4.5,
        4.5,  2.5,  2.5,  2.5,  2.5,  2.5,  2.5,  2.5,  2.5,  2.5,  2.5,
        2.5,  2.5,  2.5,  2.5,  2.5])


    carla_non_inc = np.array([50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50., 50.,
       50.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,  1.,
        1.,  1.,  1.,  1.,  1.,  1.])



    fig, axs = plt.subplots(1, 2)
    axs[0].plot(carla_time, carla_non_inc, color = 'red', linewidth = 4, label='Non-incremental')
    axs[0].plot(carla_time, carla_inc, color = 'blue', linewidth = 4, label = 'Incremental')
    axs[0].legend(loc = 'lower left')
    axs[0].grid(True)
    axs[0].set_title("Urban-driving")
    axs[0].set_ylabel("MCR (\%)")
    axs[0].set_xlabel("Time (1/60 s)")
    axs[0].set_xticks(np.arange(0, 500, 100))



    naval_time = naval_data['t'][0]
    naval_non_inc = np.array([50.       , 50.       , 50.       , 50.       , 50.       ,
       50.       , 50.       , 50.       , 50.       , 50.       ,
       50.       , 50.       , 50.       , 50.       , 50.       ,
       50.       , 50.       , 50.       , 50.       , 50.       ,
       50.       , 50.       , 50.       , 50.       , 50.       ,
       50.       , 50.       , 50.       , 50.       , 50.       ,
       50.       , 50.       , 50.       , 50.       , 50.       ,
       50.       , 50.       , 50.       , 50.       , 50.       ,
       50.       , 50.       , 50.       , 50.       , 50.       ,
       50.       , 50.       , 50.       , 50.       , 50.       ,
       50.       , 50.       , 50.       , 50.       , 50.       ,
       50.       , 50.       , 50.       , 50.       , 50.       ,
        0.6006006])

    naval_inc = np.array([50.        , 50.        , 50.        , 50.        , 50.,
       45.04504505, 44.89489489, 45.04504505, 33.33333333, 33.33333333,
       33.33333333, 33.33333333, 33.33333333, 33.18318318, 33.18318318,
       24.17417417, 26.72672673, 26.72672673, 26.72672673, 26.72672673,
       26.72672673, 26.72672673, 26.72672673, 26.72672673, 26.72672673,
       26.72672673, 22.22222222, 22.22222222, 22.22222222, 28.37837838,
       28.37837838, 20.57057057, 20.57057057, 20.57057057, 20.57057057,
       20.57057057, 20.57057057, 20.57057057, 20.57057057, 20.57057057,
       17.11711712, 17.11711712, 17.11711712, 17.11711712, 17.11711712,
       12.01201201,  7.05705706,  7.05705706,  3.15315315,  1.65165165,
        1.65165165,  1.65165165,  1.35135135,  1.35135135,  1.35135135,
        1.35135135,  0.75075075,  0.75075075,  0.75075075,  0.75075075,
        0.75075075])

    axs[1].plot(naval_time, naval_non_inc, color = 'red', linewidth = 4, label='Non-incremental')
    axs[1].plot(naval_time, naval_inc, color = 'blue', linewidth = 4, label = 'Incremental')
    axs[1].legend(loc = 'lower left')
    axs[1].grid(True)
    axs[1].set_title("Naval")
    axs[1].set_xlabel("Time (s)")
    # axs[1].set_xticks(np.arange(0, 61, 10))

    fig.savefig('/home/erfan/Documents/University/Projects/Learning Specifications/dt-tli/Figures/inc.eps', format='eps')
    plt.show()


def get_argparser():
    parser = argparse.ArgumentParser(
        formatter_class=argparse.ArgumentDefaultsHelpFormatter)
    parser.add_argument('file', help='.mat file containing the carla data')
    parser.add_argument('file1', help='.mat file containing the naval data')
    return parser


def get_path(f):
    return path.join(os.getcwd(), f)


if __name__ == '__main__':
    args        = get_argparser().parse_args()
    mat_file    = get_path(args.file)
    mat_file1   = get_path(args.file1)
    mat_data    = loadmat(mat_file)
    mat_data1   = loadmat(mat_file1)
    draw_results(mat_data, mat_data1)
